(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{526:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由"}},[t._v("#")]),t._v(" 路由")]),t._v(" "),a("h2",{attrs:{id:"为什么使用-uni-simple-router"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么使用-uni-simple-router"}},[t._v("#")]),t._v(" 为什么使用 uni-simple-router")]),t._v(" "),a("p",[a("code",[t._v("uniapp")]),t._v(" 只提供基础路由的功能，能满足日常简单业务需求。往往实际的业务场景都会比较复杂，例如涉及权限的管控，哪些页面只能登录后访问。")]),t._v(" "),a("p",[t._v("针对这样的需求，在不引入外部插件的情况下，能想到的就是在页面级别的钩子中去完成，比如 "),a("code",[t._v("onLoad")]),t._v(" 中。 假设控制页面很多，可能需要在每个页面中添加对应鉴权逻辑。 为了减少代码重复，可以通过 "),a("code",[t._v("mixins")]),t._v(" 的方式共用其鉴权的逻辑。这些都不是理想的处理方式。 为什么？ 首先 "),a("code",[t._v("minxins")]),t._v(" 并不够直观，这也就是 "),a("code",[t._v("vue3")]),t._v(" 放弃它的一个原因之一。其次一般页面级别守卫通常针对当前页面设计，并不能把全局(应用)级别控制的放入进来。")]),t._v(" "),a("p",[t._v("有没有像 "),a("code",[t._v("Vue-router")]),t._v(" 那样，既支持页面级、以及全局的守卫功能，答案有，也就是 "),a("a",{attrs:{href:"https://hhyang.cn/v2/start/tsUse.htmlhttps://hhyang.cn/v2/start/tsUse.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-simple-router"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("uni-simple-router 官方对其介绍如下：")]),t._v(" "),a("ul",[a("li",[t._v("首先属于它是 uniapp 的一个插件")]),t._v(" "),a("li",[t._v("简明优先 (语法同 vue-router 一样)")]),t._v(" "),a("li",[t._v("多端发布 (开发者编写一套代码可发布到多个平台)")])]),t._v(" "),a("p",[t._v("现在开始使用它吧。")]),t._v(" "),a("h2",{attrs:{id:"快速上手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#快速上手"}},[t._v("#")]),t._v(" 快速上手")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://hhyang.cn/v2/start/quickstart.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考官网提供快速上手"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"跨平台注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨平台注意事项"}},[t._v("#")]),t._v(" 跨平台注意事项")]),t._v(" "),a("p",[t._v("针对小程序的原生组件比如 "),a("code",[t._v("tabbar")]),t._v("、"),a("code",[t._v("header")]),t._v(" 这些动作出发页面跳转时，"),a("code",[t._v("uni-simple-router")]),t._v(" 是没办法拦截的，如果需要拦截这些页面，只能通过自定义 "),a("code",[t._v("tabbar")]),t._v("、"),a("code",[t._v("header")]),t._v(" 的方式来实现。")]),t._v(" "),a("p",[t._v("同样针对不同的端，也会有些注意事项：")]),t._v(" "),a("ul",[a("li",[t._v("H5 端")])]),t._v(" "),a("p",[t._v("在不考虑跨端的情况下，"),a("code",[t._v("uni-simple-router")]),t._v(" 完成可以像使用 "),a("code",[t._v("vue-router")]),t._v(" 的方式来使用它。")]),t._v(" "),a("ul",[a("li",[t._v("APP 端")])]),t._v(" "),a("p",[t._v("如果APP首页是通过 "),a("code",[t._v("nvue")]),t._v(" 的方式，您需要使用 "),a("code",[t._v("vue")]),t._v(" 来替代它，同时你需要在 "),a("code",[t._v("manifest.json")]),t._v(" 下把 "),a("code",[t._v("App常用其他设置")]),t._v(" 中的 "),a("code",[t._v("fast启动模式")]),t._v(" 关闭掉。打开源码视图对比以下配置：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在源码视图下的 app-plus 节点下")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"splashscreen"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"alwaysShowBeforeRender"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"waiting"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"autoclose"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"delay"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"导航方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导航方式"}},[t._v("#")]),t._v(" 导航方式")]),t._v(" "),a("p",[t._v("按照编写方式不同，分为： "),a("code",[t._v("组件式导航")]),t._v("、"),a("code",[t._v("编程式路由")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"组件式导航"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件式导航"}},[t._v("#")]),t._v(" 组件式导航")]),t._v(" "),a("p",[t._v("顾名思义通过组件来进行页面跳转，同时为了兼容小程序，组件需要在 "),a("code",[t._v("main.js")]),t._v(" 中引入并注册")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Mylink "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./node_modules/uni-simple-router/dist/link.vue'")]),t._v("\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-link'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Mylink"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("使用：")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 一个简单的name跳转 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("my-link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{name: 'tabbar-4',params: {name: 'my-link'}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("primary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("使用name对象跳转"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("my-link")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h3",{attrs:{id:"编程式路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编程式路由"}},[t._v("#")]),t._v(" 编程式路由")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("uni-simple-router")]),t._v(" "),a("th",[t._v("uni-app")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("router.push()")]),t._v(" "),a("td",[t._v("uni.navigateTo()")]),t._v(" "),a("td",[t._v("会在页面栈中添加路由记录。 注意事项，当提供了 path 时，则会忽略 params。同样提供 name 时，则会忽略 query。 通常 query 提供查询参，params 提供动态路由参数")])]),t._v(" "),a("tr",[a("td",[t._v("router.replace()")]),t._v(" "),a("td",[t._v("uni.redirectTo()")]),t._v(" "),a("td",[t._v("使用方式通过 push 一样，但是它不会在页面栈中新增记录，只会替换栈中当前记录信息。")])]),t._v(" "),a("tr",[a("td",[t._v("router.replaceAll()")]),t._v(" "),a("td",[t._v("uni.reLaunch()")]),t._v(" "),a("td",[t._v("将所有的页面都关掉，打开一个新的页面")])]),t._v(" "),a("tr",[a("td",[t._v("router.pushTab()")]),t._v(" "),a("td",[t._v("uni.switchTab()")]),t._v(" "),a("td",[t._v("打开 uni-app 自带的tab 菜单")])]),t._v(" "),a("tr",[a("td",[t._v("router.back(n,{...})")]),t._v(" "),a("td",[t._v("uni.navigateBack()")]),t._v(" "),a("td",[t._v("这个方法的参数是一个正整数，意思是在 history 记录中后退多少步，类似 "),a("code",[t._v("window.history.go(n)")])])])])]),t._v(" "),a("h2",{attrs:{id:"路由传参"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由传参"}},[t._v("#")]),t._v(" 路由传参")]),t._v(" "),a("ul",[a("li",[t._v("动态路由时传参注意事项")])]),t._v(" "),a("p",[t._v("通常路由支持 "),a("code",[t._v("动态路由")]),t._v("，"),a("code",[t._v("通配符")]),t._v(" 以及 "),a("code",[t._v("全路径")]),t._v(" 的方式。 不同的路由方式在使用时，需要注意。当使用 uni 提供的 API 来进行动态路由跳转时，系统会出现警告。 正常的做法如下:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// pages.json")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pages"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pages/page2/page2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"aliasPath"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/page2/:id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page2"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳转方式")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$Router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'page2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("params")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("除了跳转之外，获取动态参数也需要注意，通常获取参数都是 "),a("code",[t._v("onLoad")]),t._v(" 中的 "),a("code",[t._v("options")]),t._v(" 。如果当前路由是动态参数时，"),a("code",[t._v("uni-app")]),t._v(" 是不能正确解析，那么只能通过如下方式获取：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onLoad")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// {}")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$Route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// { id: 12}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"导航守卫-路由守卫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导航守卫-路由守卫"}},[t._v("#")]),t._v(" 导航守卫( 路由守卫 )")]),t._v(" "),a("h3",{attrs:{id:"全局路由守卫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局路由守卫"}},[t._v("#")]),t._v(" 全局路由守卫")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("钩子")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("router.beforeEach()")]),t._v(" "),a("td",[t._v("全局导航前置钩子")])]),t._v(" "),a("tr",[a("td",[t._v("router.afterEach()")]),t._v(" "),a("td",[t._v("全局导航后置钩子")])])])]),t._v(" "),a("h3",{attrs:{id:"路由独享的守卫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由独享的守卫"}},[t._v("#")]),t._v(" 路由独享的守卫")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("钩子")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("beforeEnter")]),t._v(" "),a("td",[t._v("全局导航前置钩子")])])])]),t._v(" "),a("h3",{attrs:{id:"组件内的守卫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件内的守卫"}},[t._v("#")]),t._v(" 组件内的守卫")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("钩子")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("beforeRouteLeave")]),t._v(" "),a("td",[t._v("在组件内配置")])])])]),t._v(" "),a("h3",{attrs:{id:"插件构建时的守卫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件构建时的守卫"}},[t._v("#")]),t._v(" 插件构建时的守卫")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRouter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("platform")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VUE_APP_PLATFORM")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("routerBeforeEach")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" from"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 每次导航触发前都会执行这个，比所有守卫都先执行")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("routerAfterEach")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳转结束后执行 守卫守卫执行完毕后再执行")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("routerErrorEach")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳转时错误后执行的守卫")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"完整的导航解析流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完整的导航解析流程"}},[t._v("#")]),t._v(" 完整的导航解析流程")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("导航被触发。")])]),t._v(" "),a("li",[a("p",[t._v("调用插件 "),a("code",[t._v("routerBeforeEach")]),t._v(" 钩子")])]),t._v(" "),a("li",[a("p",[t._v("在失活的组件里调用离开守卫 "),a("code",[t._v("beforeRouteLeave")]),t._v("。")])]),t._v(" "),a("li",[a("p",[t._v("调用全局的 "),a("code",[t._v("beforeEach")]),t._v(" 守卫。")])]),t._v(" "),a("li",[a("p",[t._v("在路由配置里调用 "),a("code",[t._v("beforeEnter")]),t._v("。")])]),t._v(" "),a("li",[a("p",[t._v("导航被确认。")])]),t._v(" "),a("li",[a("p",[t._v("调用全局的 "),a("code",[t._v("afterEach")]),t._v(" 钩子。")])]),t._v(" "),a("li",[a("p",[t._v("调用插件 "),a("code",[t._v("routerAfterEach")]),t._v(" 钩子")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("H5端")]),t._v(" 触发 "),a("code",[t._v("DOM")]),t._v(" 更新，"),a("code",[t._v("其他端")]),t._v(" 底层调用 "),a("code",[t._v("uni Api")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);